<!DOCTYPE html>
<html>
	<head>
		<title>Welcome</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<link rel="stylesheet" href="./css/main.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,300,0,0" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<!--Referencing Google charts-->
		<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
		<!--Referencing Google icons page for setting icon-->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
		<!--Referencing Google icons page for menu icon-->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<script type="text/javascript" src="jquery-1.5.min.js"></script>
		
		<script type="text/javascript">			
			let emotionHappiness = '<%-emotionHappiness%>'
			let HappinessDisplay = '<%-HappinessDisplay%>'
			let emotionAnger = '<%-emotionAnger%>'
			let emotionNeutral = '<%-emotionNeutral%>'
			let emotionDepression = '<%-emotionDepression%>'
			let emotionAnxiety = '<%-emotionAnxiety%>'
			let month = '<%-month%>'
			//Creating the donut chart:
			google.charts.load("current", {packages:["corechart"]});
			google.charts.setOnLoadCallback(drawDonutChart);
			function drawDonutChart() {
				var data = google.visualization.arrayToDataTable([
					['Emotion', 'Score'],
					['Happiness', Number(emotionHappiness)],
					['Depression', Number(emotionDepression)],
					['Anger', Number(emotionAnger)],
					['Anxiety', Number(emotionAnxiety)],
					['Neutral',	Number(emotionNeutral)]
				]);

				var options = {
				title: 'Emotion Score Based on Tweets',
				pieHole: 0.4,
				backgroundColor: 'transparent',
				slices: {
					0: { color: 'gold' },
					1: { color: 'blue' },
					2: { color: 'red' },
					3: { color: 'purple' },
					4: { color: 'green' }
				}
				};
				var chart = new google.visualization.PieChart(document.getElementById('donut_chart'));
				chart.draw(data, options);
				document.getElementById("test").innerText = HappinessDisplay;
			}
			function getMonth(){
				document.getElementById("donut_select").value = month;
			}
		</script>
	</head>
	<body onload="getMonth()">
			<div class="banner" id="banner">
				<div class="banner_content">
					<!--Twitter Profile Image-->
					<div class="banner_profile">
						<img class="profile_image" src="loginLogo.png" alt="Profile Picture" style="width:50px;height:50px;">
					</div>
					<!--Twitter Username-->
					<div class="banner_text">
						<p class="username">@<%= name %></p>
						<!--Settings icon-->
						<span class="material-symbols-outlined" style="margin-left:1250px;">menu</span>
						<!--Settings icon-->
						<span class="material-symbols-outlined">settings</span>
			
				</div>
				</div>
			</div>
			
			<!--Banner is complete, now for the main body of the page:-->
			<div class="charts">
				<table>	
					<tr>
						<td><div id="donut_chart" style="width: 700px; height: 500px;"></div></td>
					</tr>
					<tr>
						<td><center>Sort by:</center></td>
					</tr>
						<td>
							<center>
								<form id="monthSelection" action="/monthSelection" method="post">
									<select id="donut_select" class="donut_select" name="donut_select">
										<option value="01">January</option>
										<option value="02">February</option>
										<option value="03">March</option>
										<option value="04">April</option>
										<option value="05">May</option>
										<option value="06">June</option>
										<option value="07">July</option>
										<option value="08">August</option>
										<option value="09">September</option>
										<option value="10">October</option>
										<option value="11">November</option>
										<option value="12">December</option>
									</select>
									<input type="submit" name="submit"/>
								</form>
							</center>
						</td>
				</table>
			</div>
			<!-- <div>
				<thead>
					<tr>
						<th>Date</th>
						<th>Tweet</th>
						<th>Emotion Type</th>
						<th>Emotion Value</th>
					</tr>
				</thead>
				<tbody id="populate-table">

				</tbody>
			</div> -->
			<div class="abc">
				<a href="/logout">Logout</a>
			</div>
			<form class="user-card-form" id="getTwitterID" method="post" action="/update">
				<button type="submit" value="update" id="update">Update</button>
			</form>
			<p id="test"></p>
		</div>
	</body>
</html>